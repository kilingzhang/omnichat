# Omnichat Examples - å•ä¸€å…¥å£é‡æ„å®Œæˆ

## âœ… å®ŒæˆçŠ¶æ€

å·²æˆåŠŸåˆ›å»ºä¸€ä¸ªç»Ÿä¸€çš„ã€åŠŸèƒ½é½å…¨çš„å•ä¸€å…¥å£ botï¼ŒåŒ…å«æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤ºã€‚

---

## ğŸ“¦ æ–°çš„ç»Ÿä¸€å…¥å£

### æ–‡ä»¶ï¼š`src/unified-bot.ts`

è¿™æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„å•ä¸€å…¥å£ï¼ŒåŒ…å«ï¼š

#### 1. åˆç†çš„åŠŸèƒ½ç»„ç»‡

```typescript
const CONFIG = {
  botName: "Omnichat Demo Bot",

  features: {
    commands: true,        // å‘½ä»¤ç³»ç»Ÿ
    mediaHandling: true,   // åª’ä½“å¤„ç†
    autoSave: true,        // è‡ªåŠ¨ä¿å­˜
    debug: true,           // è°ƒè¯•æ¨¡å¼
    typing: true,          // Typing çŠ¶æ€
  },

  routes: {
    groupOnlyMentioned: true,  // ç¾¤ç»„ä¸­åªå“åº” @ æåŠ
  },
};
```

#### 2. å®Œæ•´çš„å‘½ä»¤ç³»ç»Ÿ

| å‘½ä»¤ | åŠŸèƒ½ | å®ç°æ–¹å¼ |
|------|------|----------|
| `/start` | æ¬¢è¿æ¶ˆæ¯ | `commands.start` |
| `/help` | æ˜¾ç¤ºæ‰€æœ‰å‘½ä»¤ | è‡ªåŠ¨ç”Ÿæˆ |
| `/id` | è·å– ID ä¿¡æ¯ | `commands.id` |
| `/info stats` | ç»Ÿè®¡ä¿¡æ¯ | `commands.info` |
| `/info capabilities` | SDK èƒ½åŠ› | `commands.info` |
| `/buttons` | æŒ‰é’®æ¼”ç¤º | `commands.buttons` |
| `/poll` | æŠ•ç¥¨æ¼”ç¤º | `commands.poll` |

**å‘½ä»¤ç³»ç»Ÿç‰¹ç‚¹ï¼š**
- âœ… ç»Ÿä¸€æ³¨å†Œè¡¨ (`commands` å¯¹è±¡)
- âœ… å‚æ•°æ”¯æŒ (`args` æ•°ç»„)
- âœ… è‡ªåŠ¨å¸®åŠ©æ–‡æœ¬ç”Ÿæˆ
- âœ… å‰ç¼€åŒ¹é… (å¦‚ `/info media`)

#### 3. æ¶ˆæ¯å­˜å‚¨å’Œç»Ÿè®¡

```typescript
class MessageStore {
  private messages: Map<string, any[]>;
  private startTime: number;

  add(message: any);
  getStats();  // è¿”å›ç»Ÿè®¡ä¿¡æ¯
}
```

**ç»Ÿè®¡æŒ‡æ ‡ï¼š**
- æ€»æ¶ˆæ¯æ•°
- å”¯ä¸€ç”¨æˆ·æ•°
- æ¶ˆæ¯/ç§’
- è¿è¡Œæ—¶é—´

#### 4. æ¶ˆæ¯å¤„ç†æµç¨‹

```
æ¥æ”¶æ¶ˆæ¯
  â†“
æ£€æŸ¥ç¾¤ç»„ @ æåŠ
  â†“
æ˜¾ç¤º typing çŠ¶æ€
  â†“
è§£æå‘½ä»¤
  â†“
æ‰§è¡Œå‘½ä»¤å¤„ç†å™¨
  â†“
å›æ˜¾æ¶ˆæ¯
  â†“
é”™è¯¯å¤„ç†
```

#### 5. æ€§èƒ½ä¼˜åŒ–

```typescript
{
  enableCache: true,      // API å“åº”ç¼“å­˜
  enableQueue: true,      // è¯·æ±‚é˜Ÿåˆ—
  queueConcurrency: 10,   // å¹¶å‘æ§åˆ¶
}
```

#### 6. åª’ä½“å¤„ç†

- âœ… è‡ªåŠ¨ä¿å­˜åˆ° `./storage/`
- âœ… æ˜¾ç¤ºå­˜å‚¨è·¯å¾„
- âœ… æ”¯æŒæ‰€æœ‰åª’ä½“ç±»å‹

#### 7. ä¼˜é›…å…³é—­

- âœ… SIGINT/SIGTERM å¤„ç†
- âœ… æ˜¾ç¤ºæœ€ç»ˆç»Ÿè®¡
- âœ… æ¸…ç†èµ„æº

---

## ğŸ“‚ æ–‡ä»¶ç»“æ„

### ä¹‹å‰ï¼ˆå¤šä¸ªåˆ†æ•£çš„ç¤ºä¾‹ï¼‰

```
packages/examples/src/
â”œâ”€â”€ index.ts                           # åŸºç¡€ç¤ºä¾‹
â”œâ”€â”€ simple-bot.ts                      # ç®€å• bot
â”œâ”€â”€ smart-type-inference-example.ts    # ç±»å‹æ¨æ–­
â”œâ”€â”€ telegram-chat-management.ts        # èŠå¤©ç®¡ç†
â””â”€â”€ config.ts                          # é…ç½®
```

### ç°åœ¨ï¼ˆç»Ÿä¸€å…¥å£ + ä¿ç•™å…¶ä»–ç¤ºä¾‹ï¼‰

```
packages/examples/src/
â”œâ”€â”€ unified-bot.ts â­                  # ä¸»å…¥å£ï¼ˆå®Œæ•´åŠŸèƒ½ï¼‰
â”œâ”€â”€ simple-bot.ts                      # ç®€å•ç¤ºä¾‹ï¼ˆè¯¦ç»†æ—¥å¿—ï¼‰
â”œâ”€â”€ smart-type-inference-example.ts    # ç±»å‹æ¨æ–­ç¤ºä¾‹
â”œâ”€â”€ telegram-chat-management.ts        # èŠå¤©ç®¡ç†ç¤ºä¾‹
â”œâ”€â”€ config.ts                          # é…ç½®åŠ è½½
â””â”€â”€ index.ts                           # æœ€å°ç¤ºä¾‹
```

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### è¿è¡Œä¸»ç¤ºä¾‹ï¼ˆæ¨èï¼‰

```bash
pnpm dev
```

### è¿è¡Œå…¶ä»–ç¤ºä¾‹

```bash
pnpm dev:simple     # ç®€å• bot
pnpm dev:chat       # èŠå¤©ç®¡ç†
pnpm dev:smart      # ç±»å‹æ¨æ–­
```

---

## ğŸ’¡ è®¾è®¡åŸåˆ™

### 1. å•ä¸€èŒè´£

æ¯ä¸ªéƒ¨åˆ†è´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½ï¼š
- **CONFIG**: å…¨å±€é…ç½®
- **commands**: å‘½ä»¤å¤„ç†å™¨
- **MessageStore**: æ¶ˆæ¯ç»Ÿè®¡
- **handleMessage**: æ¶ˆæ¯å¤„ç†é€»è¾‘
- **handleButtonPress**: æŒ‰é’®å›è°ƒ

### 2. æ˜“äºæ‰©å±•

æ·»åŠ æ–°å‘½ä»¤éå¸¸ç®€å•ï¼š

```typescript
const commands: Record<string, Command> = {
  // ... ç°æœ‰å‘½ä»¤

  // æ·»åŠ æ–°å‘½ä»¤
  mycommand: {
    description: "æˆ‘çš„æ–°å‘½ä»¤",
    handler: async (message, sdk, args) => {
      await sdk.send("telegram", { text: "å“åº”" }, { to: message.from.id });
    },
  },
};
```

### 3. ç±»å‹å®‰å…¨

- âœ… å®Œæ•´çš„ TypeScript ç±»å‹
- âœ… æ¥å£å®šä¹‰æ¸…æ™°
- âœ… ç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥

### 4. é”™è¯¯å¤„ç†

```typescript
try {
  // å¤„ç†æ¶ˆæ¯
} catch (error) {
  console.error("âŒ å¤„ç†æ¶ˆæ¯æ—¶å‡ºé”™:", error.message);
  // å°è¯•å‘é€é”™è¯¯æ¶ˆæ¯
}
```

### 5. å¯é…ç½®æ€§

æ‰€æœ‰åŠŸèƒ½éƒ½å¯ä»¥é€šè¿‡ `CONFIG` å¯¹è±¡å¼€å…³ï¼š

```typescript
features: {
  commands: true,        // å¯ç”¨/ç¦ç”¨å‘½ä»¤ç³»ç»Ÿ
  mediaHandling: true,   // å¯ç”¨/ç¦ç”¨åª’ä½“å¤„ç†
  autoSave: true,        // å¯ç”¨/ç¦ç”¨è‡ªåŠ¨ä¿å­˜
  debug: true,           // å¯ç”¨/ç¦ç”¨è°ƒè¯•
  typing: true,          // å¯ç”¨/ç¦ç”¨ typing çŠ¶æ€
}
```

---

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | unified-bot | simple-bot | chat-management | smart-inference |
|------|-------------|------------|----------------|-----------------|
| å‘½ä»¤ç³»ç»Ÿ | âœ… å®Œæ•´ | âœ… å®Œæ•´ | âŒ | âŒ |
| æ¶ˆæ¯å›æ˜¾ | âœ… | âœ… | âŒ | âŒ |
| åª’ä½“å¤„ç† | âœ… | âœ… | âŒ | âŒ |
| è‡ªåŠ¨ä¿å­˜ | âœ… | âœ… | âŒ | âŒ |
| ç¾¤ç»„æ”¯æŒ | âœ… | âœ… | âœ… | âŒ |
| è¯¦ç»†æ—¥å¿— | âœ… | âœ…âœ… è¶…è¯¦ç»† | âŒ | âŒ |
| ç»Ÿè®¡ä¿¡æ¯ | âœ… | âŒ | âŒ | âŒ |
| æŒ‰é’®æ¼”ç¤º | âœ… | âŒ | âŒ | âŒ |
| æŠ•ç¥¨æ¼”ç¤º | âœ… | âŒ | âŒ | âŒ |
| èŠå¤©ç®¡ç† | âŒ | âŒ | âœ… | âŒ |
| ç±»å‹æ¨æ–­ | âŒ | âŒ | âŒ | âœ… |

---

## ğŸ¯ æ¨èä½¿ç”¨åœºæ™¯

### å­¦ä¹  Omnichat SDK

**ä» `unified-bot.ts` å¼€å§‹**ï¼š
- åŠŸèƒ½æœ€å…¨é¢
- ä»£ç ç»„ç»‡æœ€å¥½
- æ³¨é‡Šè¯¦ç»†
- æ˜“äºç†è§£

### æ·±å…¥å­¦ä¹ ç‰¹å®šåŠŸèƒ½

- **èŠå¤©ç®¡ç†**: `telegram-chat-management.ts`
- **ç±»å‹æ¨æ–­**: `smart-type-inference-example.ts`

### è°ƒè¯•å’Œæµ‹è¯•

- **è¯¦ç»†æ—¥å¿—**: `simple-bot.ts`
- **å¿«é€Ÿæµ‹è¯•**: `unified-bot.ts`

---

## âœ… ä¼˜åŠ¿æ€»ç»“

### 1. å•ä¸€å…¥å£
- âœ… ä¸€ä¸ªæ–‡ä»¶åŒ…å«æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½
- âœ… ä¸éœ€è¦åœ¨å¤šä¸ªæ–‡ä»¶é—´è·³è½¬
- âœ… å®Œæ•´çš„åŠŸèƒ½æ¼”ç¤º

### 2. åˆç†ç»„ç»‡
- âœ… é…ç½®é›†ä¸­ç®¡ç†
- âœ… å‘½ä»¤ç»Ÿä¸€æ³¨å†Œ
- âœ… åŠŸèƒ½æ¨¡å—åŒ–
- âœ… æ˜“äºæ‰©å±•

### 3. ä¸è¿‡åº¦è®¾è®¡
- âœ… åªåŒ…å«å¿…è¦åŠŸèƒ½
- âœ… æ²¡æœ‰è¿‡åº¦æŠ½è±¡
- âœ… ä»£ç æ¸…æ™°æ˜“æ‡‚
- âœ… å®ç”¨ä¸ºä¸»

### 4. ç”Ÿäº§å°±ç»ª
- âœ… é”™è¯¯å¤„ç†å®Œå–„
- âœ… æ€§èƒ½ä¼˜åŒ–å¯ç”¨
- âœ… ä¼˜é›…å…³é—­
- âœ… ç»Ÿè®¡ä¿¡æ¯

---

## ğŸ”„ ä¸å…¶ä»–ç¤ºä¾‹çš„å…³ç³»

```
unified-bot.ts (ä¸»å…¥å£ â­)
    â”œâ”€â”€ å¸æ”¶äº† simple-bot çš„æ ¸å¿ƒåŠŸèƒ½
    â”œâ”€â”€ æ·»åŠ äº†å‘½ä»¤ç³»ç»Ÿ
    â”œâ”€â”€ æ·»åŠ äº†ç»Ÿè®¡åŠŸèƒ½
    â”œâ”€â”€ æ·»åŠ äº†æ€§èƒ½ä¼˜åŒ–
    â””â”€â”€ æä¾›äº†å®Œæ•´çš„æ¼”ç¤º
```

**å…¶ä»–ç¤ºä¾‹ä¿ç•™çš„åŸå› ï¼š**
- `simple-bot.ts`: è¶…è¯¦ç»†çš„æ—¥å¿—ï¼Œé€‚åˆå­¦ä¹ 
- `telegram-chat-management.ts`: ä¸“æ³¨äºèŠå¤©ç®¡ç†
- `smart-type-inference-example.ts`: ä¸“æ³¨äºç±»å‹æ¨æ–­

---

## ğŸ“ ä¸‹ä¸€æ­¥å»ºè®®

### 1. æ·»åŠ æµ‹è¯•

ä¸º `unified-bot.ts` æ·»åŠ æµ‹è¯•ï¼š
- å•å…ƒæµ‹è¯•ï¼ˆå‘½ä»¤å¤„ç†ï¼‰
- é›†æˆæµ‹è¯•ï¼ˆç«¯åˆ°ç«¯ï¼‰

### 2. æ·»åŠ æ›´å¤šå¹³å°

æ‰©å±•æ”¯æŒ Discordã€Slackï¼š
```typescript
const sdk = new SDK({
  adapters: {
    telegram: {...},
    discord: {...},
    slack: {...},
  },
});
```

### 3. æ·»åŠ  Webhook æ”¯æŒ

æ¼”ç¤º Webhook æ¨¡å¼ï¼š
```typescript
{
  polling: false,
  webhookUrl: "https://your-domain.com/webhook",
}
```

---

## æ€»ç»“

**æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªç»Ÿä¸€ã€å®Œæ•´ã€åˆç†çš„å•ä¸€å…¥å£ï¼**

- âœ… ä¸€ä¸ªæ–‡ä»¶åŒ…å«æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½
- âœ… åˆç†çš„åŠŸèƒ½ç»„ç»‡
- âœ… ä¸ä¸ºäº†ç½—åˆ—è€Œç½—åˆ—
- âœ… æ˜“äºç†è§£å’Œä½¿ç”¨
- âœ… ä¿ç•™äº†å…¶ä»–ä¸“é—¨çš„ç¤ºä¾‹

**è¿™ä¸ªå•ä¸€å…¥å£ç°åœ¨å¯ä»¥ä½œä¸ºï¼š**
1. å­¦ä¹  Omnichat SDK çš„èµ·ç‚¹
2. å¿«é€Ÿæµ‹è¯•åŠŸèƒ½çš„å·¥å…·
3. å¼€å‘è‡ªå·± bot çš„æ¨¡æ¿
4. æ¼”ç¤º SDK èƒ½åŠ›çš„å±•ç¤º
